{"version":3,"sources":["./src/app/routes/userinfo/user-info.component.html","./src/app/routes/userinfo/user-info-routing.module.ts","./src/app/routes/userinfo/user-info.component.ts","./src/app/routes/userinfo/user-info.module.ts","./src/app/routes/userinfo/user-info.service.ts"],"names":[],"mappings":"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","file":"userinfo-user-info-module-es5.js","sourcesContent":["module.exports = \"<div nz-row [nzGutter]=\\\"24\\\" class=\\\"pt-lg\\\">\\r\\n  <div nz-col nzXs=\\\"24\\\" nzSm=\\\"12\\\" nzMd=\\\"24\\\" class=\\\"mb-md\\\">\\r\\n    <nz-card [nzBordered]=\\\"false\\\" [nzTitle]=\\\"title\\\">\\r\\n      <form nz-form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"submit()\\\" se-container=\\\"1\\\" labelWidth=\\\"200\\\">\\r\\n\\r\\n        <se label=\\\"姓名\\\" error=\\\"请输入姓名，大于两个字符\\\">\\r\\n          <input nz-input formControlName=\\\"real_name\\\" placeholder=\\\"请输入姓名\\\" />\\r\\n        </se>\\r\\n        <se label=\\\"手机号\\\" error=\\\"请输入手机号\\\">\\r\\n          <input nz-input formControlName=\\\"mobile\\\" placeholder=\\\"请输入手机号\\\" />\\r\\n        </se>\\r\\n        <se label=\\\"岗位\\\" error=\\\"请输入岗位名称\\\">\\r\\n          <input nz-input formControlName=\\\"position\\\" placeholder=\\\"请输入岗位名称\\\" />\\r\\n        </se>\\r\\n        <se label=\\\"用户头像\\\">\\r\\n          <nz-upload nzAction=\\\"https://jsonplaceholder.typicode.com/posts/\\\" [(nzFileList)]=\\\"fileList\\\"\\r\\n            [nzBeforeUpload]=\\\"beforeUpload\\\">\\r\\n            <button nz-button type=\\\"button\\\"><i nz-icon nzType=\\\"upload\\\"></i><span>点击上传</span></button>\\r\\n          </nz-upload>\\r\\n          <!-- <a *ngIf=\\\"showFile\\\">{{tmpl.file_name}}</a> -->\\r\\n        </se>\\r\\n\\r\\n        <se>\\r\\n          <button nz-button nzType=\\\"primary\\\" [disabled]=\\\"form.invalid\\\" type=\\\"submit\\\"\\r\\n            [nzLoading]=\\\"submitting\\\">提交</button>\\r\\n          <button nz-button class=\\\"ml-sm\\\" type=\\\"reset\\\">重置</button>\\r\\n        </se>\\r\\n      </form>\\r\\n    </nz-card>\\r\\n  </div>\\r\\n</div>\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { UserInfoComponent } from './user-info.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: UserInfoComponent,\r\n    children: [\r\n      { path: 'info', component: UserInfoComponent }\r\n    ],\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class UserInfoRoutingModule { }\r\n","import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators, FormControl } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Observable, Observer } from 'rxjs';\r\nimport { NzMessageService } from 'ng-zorro-antd';\r\nimport { UploadFile } from 'ng-zorro-antd';\r\nimport { UserInfoService } from './user-info.service';\r\n\r\n@Component({\r\n  templateUrl: './user-info.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class UserInfoComponent implements OnInit {\r\n  form: FormGroup;\r\n  submitting = false;\r\n  title: string;\r\n  user: any = {};\r\n\r\n  avatarUrl: any = '';\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private msg: NzMessageService,\r\n    private cdr: ChangeDetectorRef,\r\n    private router: Router,\r\n    private srv: UserInfoService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.setTitle();\r\n    this.form = this.fb.group({\r\n      real_name: [\r\n        localStorage.getItem(\"real_name\") ? localStorage.getItem(\"real_name\") : null,\r\n        [],\r\n      ],\r\n      mobile: [\r\n        localStorage.getItem(\"mobile\") ? localStorage.getItem(\"mobile\") : null,\r\n        [],\r\n      ],\r\n      position: [\r\n        localStorage.getItem(\"position\") ? localStorage.getItem(\"position\") : null,\r\n        [],\r\n      ]\r\n    });\r\n  }\r\n\r\n  submit() {\r\n    this.submitting = true;\r\n    // const obj = this.form.value;\r\n    const obj = this.formmatFormValue();\r\n    // if (this.file) obj.avatar = this.fileList[0];\r\n    this.srv.update(this.user.id, obj).subscribe(resp => {\r\n      if (resp['data']) {\r\n        this.submitting = false;\r\n        if (resp['data']) this.msg.success(`保存成功！`);\r\n        this.router.navigateByUrl('/project/page');\r\n        this.cdr.detectChanges();\r\n      }\r\n    })\r\n  }\r\n\r\n  setTitle() {\r\n    this.title = '个人信息';\r\n  }\r\n\r\n  formmatFormValue() {\r\n    let obj = this.form.value;\r\n    if ((this.fileList) && (this.fileList.length > 0)) { obj.avatar = this.fileList[0] }\r\n    console.log(obj);\r\n    return obj;\r\n  }\r\n\r\n  showFile = true;\r\n  fileList: UploadFile[] = []\r\n  beforeUpload = (file: UploadFile): boolean => {\r\n    console.log(file);\r\n    this.showFile = false;\r\n    this.fileList = [file];\r\n    return false;\r\n  };\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { SharedModule } from '@shared/shared.module';\r\n\r\nimport { UserInfoRoutingModule } from './user-info-routing.module';\r\n\r\nimport { UserInfoComponent } from './user-info.component';\r\nimport { UserInfoService } from './user-info.service';\r\n\r\n@NgModule({\r\n  imports: [SharedModule, UserInfoRoutingModule],\r\n  declarations: [UserInfoComponent],\r\n  providers: [\r\n    UserInfoService,\r\n  ],\r\n})\r\nexport class UserInfoModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\n\r\nimport { baseUrl } from '../../shared/app-config';\r\nimport { getFormData, formmat } from '../../shared/utils/formmat';\r\n\r\n\r\n@Injectable()\r\nexport class UserInfoService {\r\n  constructor(private http: HttpClient) { }\r\n  url = baseUrl + 'user/info';\r\n\r\n  user: any = null;\r\n  isUpdate = false;\r\n\r\n  getUser() {\r\n    return this.http.get(this.url);\r\n  }\r\n\r\n  update(id, obj) {\r\n    return this.http.put(this.url, getFormData(obj));\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}